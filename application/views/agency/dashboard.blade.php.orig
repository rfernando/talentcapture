@extends('template.template')

@section('page-css')
    <link rel="stylesheet" href="{{ admin_assets_url('plugins/iCheck/flat/blue.css') }}">
    <!-- Morris chart -->
    <link rel="stylesheet" href="{{ admin_assets_url('plugins/morris/morris.css')  }}">
    <!-- jvectormap -->
    <link rel="stylesheet" href="{{ admin_assets_url('plugins/jvectormap/jquery-jvectormap-1.2.2.css') }}">
    <!-- Date Picker -->
    <link rel="stylesheet" href="{{ admin_assets_url('plugins/datepicker/datepicker3.css') }}">
    <!-- Daterange picker -->
    <link rel="stylesheet" href="{{ admin_assets_url('plugins/daterangepicker/daterangepicker-bs3.css') }}">
    <!-- bootstrap wysihtml5 - text editor -->
    <link rel="stylesheet" href="{{ admin_assets_url('plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css') }}">
    @endsection

    @section('main-content')
            <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            Dashboard
            <small></small>
        </h1>
        <ol class="breadcrumb">
            <li class="active"><i class="fa fa-dashboard"></i> Home</li>
        </ol>
    </section>

    <!-- Main content -->
    <section class="content" id="main-content">
        @include('dashboard_widgets._stats')

        <!-- <div class="callout callout-info">
            <h4>NOTE</h4>

            <p>You can manage the widgets that are shown on your dashboard from your Profile Settings.</p>
        </div> -->

        <!-- Main row -->
        <div class="row">
            <!-- Left col -->
            @if(isset($subscription['type']) && !empty($subscription['type']))
            <section>
                <div class="alert alert-{{ $subscription['type'] }}">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    {{ $subscription['msg'] }}
                </div>
            </section>
            @endif
            <section class="col-lg-6 connectedSortable">

                @include('dashboard_widgets._my_jobs')
                @include('dashboard_widgets._my_so_stats')


            </section>
            <!-- /.Left col -->
            <!-- right col (We are only adding the ID to make the widgets sortable)-->
            <section class="col-lg-6 connectedSortable">
                @if(!isset($subscription['type']))
                    @include('dashboard_widgets._new_job_alerts')
                @endif
                @include('dashboard_widgets._accepted_jobs')
            </section>
            <!-- right col -->
        </div>
        <!-- /.row (main row) -->

    </section>
    <!-- /.content -->
@endsection

@section('page-js')
    <script>
        $.widget.bridge('uibutton', $.ui.button);
    </script>
    <!-- Morris.js charts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
    <script src="{{ admin_assets_url('plugins/morris/morris.min.js') }}"></script>
    <!-- Sparkline -->
    <script src="{{ admin_assets_url('plugins/sparkline/jquery.sparkline.min.js') }}"></script>
    <!-- jvectormap -->
    <script src="{{ admin_assets_url('plugins/jvectormap/jquery-jvectormap-1.2.2.min.js') }}"></script>
    <script src="{{ admin_assets_url('plugins/jvectormap/jquery-jvectormap-world-mill-en.js') }}"></script>
    <!-- jQuery Knob Chart -->
    <script src="{{ admin_assets_url('plugins/knob/jquery.knob.js') }}"></script>
    <!-- daterangepicker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
    <script src="{{ admin_assets_url('plugins/daterangepicker/daterangepicker.js') }}"></script>
    <!-- datepicker -->
    <script src="{{ admin_assets_url('plugins/datepicker/bootstrap-datepicker.js') }}"></script>
    <!-- Bootstrap WYSIHTML5 -->
    <script src="{{ admin_assets_url('plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js') }}"></script>

    <!-- FastClick -->
    <script src="{{ admin_assets_url('plugins/fastclick/fastclick.js') }}"></script>
    <script>
        $('[rel="popover"]').popover({
            trigger: "hover",
            html:true,
            container: '#main-content',
            content: function() {
                return $('#'+$(this).data('content_id')).html();
            }
        });
    </script>
@endsection

@section('end-script')
    <script src="{{ admin_assets_url('dist/js/pages/dashboard.js') }}"></script>

    <script type="text/javascript">
        var body = $('body');

        function callback(result, element){
            element.closest('li').fadeOut();
            var type = 'Error';
            if(result.status)
                type = 'Success';
            var className = (type == 'Error') ? 'danger' : 'success';
            var html = '<div class="alert alert-'+ className +'">'+ result.msg +'</div>';
            $('#rsvp-result-container').html(html).slideDown(500).delay(2000).slideUp(500);
        }

        $('[rel="popover"]').popover({
            trigger: "hover",
            html:true,
            container: '#main-content',
            content: function() {
                return $('#'+$(this).data('content_id')).html();
            }
        });
    </script>
@endsection
